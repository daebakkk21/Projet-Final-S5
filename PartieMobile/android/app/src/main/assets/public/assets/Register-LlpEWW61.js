import{d as L,c as H,w as r,u as s,I as j,a as l,b as G,e as D,f as J,g as U,h as c,i as $,j as t,k as i,G as K,m as y,n as S,o as E,p as Q,r as h,s as B,v as b,H as V,q as W,J as X,K as Y,L as N,x as R,z as Z,M as ee,N as se,O as te,P as ne,Q as le,C as oe,D as k,R as T,F as _,_ as ae}from"./index-DTOPIIQY.js";import{c as ie,a as re}from"./firebase-BfoIeN5G.js";const ue={class:"register-container"},ce={class:"register-header"},de={class:"logo-icon"},me={class:"form-section"},pe={class:"input-group"},ve={key:0,class:"error-message"},fe={key:1,class:"success-message"},ge={class:"input-group"},Ie={class:"password-hint"},ke={key:0,class:"error-message"},_e={key:1,class:"success-message"},he={class:"terms-section"},be={class:"buttons-container"},Ce={class:"benefits-section"},we={class:"benefits-list"},ye={class:"benefit-item"},Ee={class:"benefit-item"},Ve={class:"benefit-item"},ze={class:"benefit-item"},Oe=L({__name:"Register",setup(xe){const u=k(""),o=k(""),m=k(!1),A=n=>/^\S+@\S+\.\S+$/.test(n),d=T(()=>A((u.value||"").trim())),M=T(()=>d.value&&o.value&&o.value.length>=6),z=k(null),O=k(null),x=n=>{if(!n)return null;try{const e=n.shadowRoot,a=e&&e.querySelector("input")||n.querySelector&&n.querySelector("input")||null;return a?a.value:null}catch(e){return null}},C=n=>{var p,v,f,g,I;const e=(g=(f=(p=n==null?void 0:n.detail)==null?void 0:p.value)!=null?f:(v=n==null?void 0:n.target)==null?void 0:v.value)!=null?g:"",a=(I=x(z.value))!=null?I:"";u.value=e||a},w=n=>{var p,v,f,g,I;const e=(g=(f=(p=n==null?void 0:n.detail)==null?void 0:p.value)!=null?f:(v=n==null?void 0:n.target)==null?void 0:v.value)!=null?g:"",a=(I=x(O.value))!=null?I:"";o.value=e||a},P=()=>{alert("Conditions d'utilisation\n\nEn cr√©ant un compte, vous acceptez nos conditions d'utilisation...")},q=()=>{alert("Politique de confidentialit√©\n\nNous prot√©geons vos donn√©es personnelles...")},F=async()=>{typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();const n=(u.value||"").trim();if(console.log("EMAIL SENT TO FIREBASE üëâ",n),!n||!d.value){console.warn("Register prevented: invalid email according to client check:",n);return}if(!o.value||o.value.length<6){console.warn("Register prevented: short password");return}if(!m.value){alert("Veuillez accepter les conditions d'utilisation pour continuer.");return}const e=n.normalize?n.normalize("NFC"):n;try{await ie(re,e,o.value),alert("üéâ Compte cr√©√© avec succ√®s !\n\nVous pouvez maintenant vous connecter avec vos identifiants.")}catch(a){console.error("Firebase error code/message:",a.code,a.message),a.code==="auth/invalid-email"?alert("‚ùå Email invalide.\nVeuillez v√©rifier le format de l'email et r√©essayer."):a.code==="auth/email-already-in-use"?alert("‚ö†Ô∏è Cet email est d√©j√† utilis√©.\nEssayez de vous connecter ou utilisez un autre email."):a.code==="auth/weak-password"?alert("üîí Mot de passe trop faible.\nVeuillez choisir un mot de passe plus fort."):alert("‚ùå Erreur : ".concat(a.message))}};return(n,e)=>(_(),H(s(j),null,{default:r(()=>[l(s($),null,{default:r(()=>[l(s(G),null,{default:r(()=>[l(s(D),{slot:"start"},{default:r(()=>[l(s(J),{defaultHref:"/home",text:"Retour"})]),_:1}),l(s(U),null,{default:r(()=>[...e[1]||(e[1]=[c("Inscription",-1)])]),_:1})]),_:1})]),_:1}),l(s(oe),{class:"ion-padding"},{default:r(()=>[t("div",ue,[t("div",ce,[t("div",de,[l(s(i),{icon:s(K)},null,8,["icon"])]),e[2]||(e[2]=t("h1",{class:"register-title"},"Rejoignez-nous",-1)),e[3]||(e[3]=t("p",{class:"register-subtitle"},"Cr√©ez votre compte Garage Elite",-1))]),t("div",me,[t("div",pe,[l(s(y),{class:"input-label"},{default:r(()=>[...e[4]||(e[4]=[c("Adresse email",-1)])]),_:1}),l(s(S),{ref_key:"emailInput",ref:z,type:"email",value:u.value,onIonInput:C,onInput:C,onChange:C,placeholder:"exemple@email.com",class:E(["custom-input",{"has-error":u.value&&!d.value,"has-success":u.value&&d.value}])},{default:r(()=>[l(s(i),{icon:s(Q),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),u.value&&!d.value?(_(),h("div",ve,[l(s(i),{icon:s(B)},null,8,["icon"]),e[5]||(e[5]=t("span",null,"Veuillez saisir une adresse email valide",-1))])):b("",!0),u.value&&d.value?(_(),h("div",fe,[l(s(i),{icon:s(V)},null,8,["icon"]),e[6]||(e[6]=t("span",null,"Format d'email valide",-1))])):b("",!0)]),t("div",ge,[l(s(y),{class:"input-label"},{default:r(()=>[...e[7]||(e[7]=[c("Mot de passe",-1)])]),_:1}),l(s(S),{ref_key:"passwordInput",ref:O,type:"password",value:o.value,onIonInput:w,onInput:w,onChange:w,placeholder:"Minimum 6 caract√®res",class:E(["custom-input",{"has-error":o.value&&o.value.length<6,"has-success":o.value&&o.value.length>=6}])},{default:r(()=>[l(s(i),{icon:s(W),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),t("div",Ie,[t("div",{class:E(["hint-item",{valid:o.value.length>=6}])},[l(s(i),{icon:o.value.length>=6?s(V):s(X)},null,8,["icon"]),e[8]||(e[8]=t("span",null,"Au moins 6 caract√®res",-1))],2)]),o.value&&o.value.length<6?(_(),h("div",ke,[l(s(i),{icon:s(B)},null,8,["icon"]),e[9]||(e[9]=t("span",null,"Le mot de passe doit contenir au moins 6 caract√®res",-1))])):b("",!0),o.value&&o.value.length>=6?(_(),h("div",_e,[l(s(i),{icon:s(V)},null,8,["icon"]),e[10]||(e[10]=t("span",null,"Mot de passe valide",-1))])):b("",!0)]),t("div",he,[l(s(Y),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),checked:m.value},null,8,["modelValue","checked"]),l(s(y),{class:"terms-label"},{default:r(()=>[e[11]||(e[11]=c(" J'accepte les ",-1)),t("a",{href:"#",class:"terms-link",onClick:N(P,["prevent"])},"conditions d'utilisation"),e[12]||(e[12]=c(" et la ",-1)),t("a",{href:"#",class:"terms-link",onClick:N(q,["prevent"])},"politique de confidentialit√©")]),_:1})]),t("div",be,[l(s(R),{expand:"block",onClick:F,disabled:!M.value||!m.value,color:"success",class:"primary-btn"},{default:r(()=>[l(s(i),{icon:s(Z),slot:"start"},null,8,["icon"]),e[13]||(e[13]=c(" Cr√©er mon compte ",-1))]),_:1},8,["disabled"]),l(s(R),{fill:"clear",routerLink:"/login",routerDirection:"forward",class:"secondary-link"},{default:r(()=>[l(s(i),{icon:s(ee),slot:"start"},null,8,["icon"]),e[14]||(e[14]=c(" Se connecter ",-1))]),_:1})]),t("div",Ce,[e[19]||(e[19]=t("h3",{class:"benefits-title"},"Avantages d'un compte Garage Elite",-1)),t("div",we,[t("div",ye,[l(s(i),{icon:s(se),color:"success"},null,8,["icon"]),e[15]||(e[15]=t("span",null,"Prendre rendez-vous en ligne",-1))]),t("div",Ee,[l(s(i),{icon:s(te),color:"success"},null,8,["icon"]),e[16]||(e[16]=t("span",null,"Historique des r√©parations",-1))]),t("div",Ve,[l(s(i),{icon:s(ne),color:"success"},null,8,["icon"]),e[17]||(e[17]=t("span",null,"Alertes d'entretien",-1))]),t("div",ze,[l(s(i),{icon:s(le),color:"success"},null,8,["icon"]),e[18]||(e[18]=t("span",null,"Points fid√©lit√©",-1))])])])])])]),_:1})]),_:1}))}}),Ne=ae(Oe,[["__scopeId","data-v-aed4db96"]]);export{Ne as default};
