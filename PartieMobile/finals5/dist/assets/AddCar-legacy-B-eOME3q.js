System.register(["./index-legacy-DV7ktizM.js","./firebase-legacy-B4mvSQHv.js"],function(e,a){"use strict";var t,r,o,i,n,l,d,s,c,p,u,m,v,f,g,b,x,h,y,w,k,z,_,I,S,V,D,E,F,U,$,A,j,C,Y,q;return{setters:[e=>{t=e.d,r=e.S,o=e.c,i=e.w,n=e.u,l=e.I,d=e.E,s=e.a,c=e.b,p=e.e,u=e.f,m=e.g,v=e.h,f=e.i,g=e.j,b=e.M,x=e.Y,h=e.Z,y=e.$,w=e.r,k=e.V,z=e.U,_=e.k,I=e.a0,S=e.z,V=e.v,D=e.a1,E=e.D,F=e.F,U=e.G,$=e.t,A=e._},e=>{j=e.g,C=e.r,Y=e.d,q=e.s}],execute:function(){var a=document.createElement("style");a.textContent="[data-v-6e92e304]:root{--brand-orange: #E85002;--brand-orange-dark: #D14802;--primary-black: #000000;--primary-white: #F9F9F9;--gray-medium: #646464;--gray-light: #A7A7A7;--gray-dark: #333333;--primary-bg: var(--primary-white);--card-bg: #FFFFFF;--border-color: rgba(0, 0, 0, .12);--shadow-color: rgba(0, 0, 0, .08);--error-light: rgba(220, 38, 38, .1);--success-light: rgba(5, 150, 105, .1)}ion-page[data-v-6e92e304]{background-color:var(--primary-bg)}ion-content[data-v-6e92e304]{--background: var(--primary-bg);--padding-start: 20px;--padding-end: 20px;--padding-top: 24px;--padding-bottom: 24px}ion-header[data-v-6e92e304]{background:var(--card-bg);border-bottom:1.5px solid var(--border-color)}ion-toolbar[data-v-6e92e304]{--background: var(--card-bg);--color: var(--primary-black)}ion-title[data-v-6e92e304]{font-weight:700;font-size:18px}.form-container[data-v-6e92e304]{max-width:440px;margin:0 auto}.form-header[data-v-6e92e304]{text-align:center;padding:0 0 28px;border-bottom:2px solid var(--border-color);margin-bottom:28px}.form-title[data-v-6e92e304]{font-size:28px;font-weight:800;margin:0 0 8px;color:var(--primary-black);letter-spacing:-.5px}.form-subtitle[data-v-6e92e304]{font-size:15px;color:var(--gray-medium);margin:0;font-weight:500}.form-section[data-v-6e92e304]{margin-bottom:28px}.form-group[data-v-6e92e304]{margin-bottom:24px;display:flex;flex-direction:column}.form-group[data-v-6e92e304]:last-of-type{margin-bottom:28px}.form-label[data-v-6e92e304]{font-size:15px;font-weight:700;color:var(--primary-black);margin-bottom:10px;display:flex;align-items:center;gap:8px}.optional[data-v-6e92e304]{font-size:13px;font-weight:500;color:var(--gray-light);font-style:italic}.form-hint[data-v-6e92e304]{font-size:13px;color:var(--gray-medium);margin:0 0 8px;font-weight:400}.form-input[data-v-6e92e304],.form-textarea[data-v-6e92e304],.form-select[data-v-6e92e304]{width:100%;padding:12px 14px;border:1.5px solid var(--border-color);border-radius:10px;font-size:15px;font-family:inherit;color:var(--primary-black);background:var(--card-bg);transition:all .2s ease;box-sizing:border-box}.form-input[data-v-6e92e304]::placeholder,.form-textarea[data-v-6e92e304]::placeholder{color:var(--gray-light)}.form-input[data-v-6e92e304]:focus,.form-textarea[data-v-6e92e304]:focus,.form-select[data-v-6e92e304]:focus{outline:none;border-color:var(--brand-orange);background:var(--card-bg);box-shadow:0 0 0 3px rgba(232,80,2,.1)}.form-textarea[data-v-6e92e304]{resize:vertical;min-height:120px;font-family:inherit}.form-select[data-v-6e92e304]{cursor:pointer;color:var(--gray-dark)}.form-select option[data-v-6e92e304]{color:var(--primary-black);background:var(--card-bg)}.submit-btn[data-v-6e92e304]{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;height:48px;background:var(--brand-orange);color:var(--primary-white);border-radius:12px;font-weight:600;font-size:16px;border:none;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px rgba(232,80,2,.25);padding:0;text-transform:none;letter-spacing:.3px}.submit-btn[data-v-6e92e304]:not(:disabled):active{background:var(--brand-orange-dark);transform:translateY(1px);box-shadow:0 2px 8px rgba(232,80,2,.35)}.submit-btn[data-v-6e92e304]:disabled{opacity:.6;cursor:not-allowed}.btn-icon[data-v-6e92e304]{font-size:20px}.info-box[data-v-6e92e304]{background:var(--success-light);border-radius:12px;padding:16px;display:flex;gap:12px;align-items:flex-start;border-left:4px solid #059669}.info-icon[data-v-6e92e304]{font-size:24px;color:#059669;flex-shrink:0;margin-top:2px}.info-box p[data-v-6e92e304]{font-size:14px;color:var(--gray-dark);margin:0;line-height:1.5;font-weight:500}@media (max-width: 350px){ion-content[data-v-6e92e304]{--padding-start: 16px;--padding-end: 16px}.form-title[data-v-6e92e304]{font-size:24px}.form-subtitle[data-v-6e92e304]{font-size:14px}.submit-btn[data-v-6e92e304]{height:44px;font-size:15px}.form-input[data-v-6e92e304],.form-textarea[data-v-6e92e304],.form-select[data-v-6e92e304]{font-size:16px}}@keyframes fadeInUp-6e92e304{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[data-v-6e92e304]{animation:fadeInUp-6e92e304 .4s ease-out}.form-group[data-v-6e92e304]{animation:fadeInUp-6e92e304 .4s ease-out backwards}.form-group[data-v-6e92e304]:nth-child(1){animation-delay:.1s}.form-group[data-v-6e92e304]:nth-child(2){animation-delay:.2s}.form-group[data-v-6e92e304]:nth-child(3){animation-delay:.3s}.form-group[data-v-6e92e304]:nth-child(4){animation-delay:.4s}.form-group[data-v-6e92e304]:nth-child(5){animation-delay:.5s}.submit-btn[data-v-6e92e304]{animation:fadeInUp-6e92e304 .4s ease-out .6s both}.info-box[data-v-6e92e304]{animation:fadeInUp-6e92e304 .4s ease-out .7s both}\n/*$vite$:1*/",document.head.appendChild(a);const M={class:"form-container"},O={class:"form-group"},P={class:"form-group"},B={class:"form-group"},G=["value"],J=["disabled"],N={key:2},T={class:"info-box"};e("default",A(t({__name:"AddCar",setup(e){const a=F(),t=d(!1),A=d({}),Z=d({immatriculation:"",description:"",typeIntervention:""});r(async()=>{try{const e=await j(C(Y,"type_interventions"));e.exists()&&(A.value=e.val())}catch(e){console.error("Erreur lors du chargement des types d'interventions:",e)}});const H=async()=>{const e=localStorage.getItem("client");if(!e)return alert("Vous devez être connecté pour ajouter une voiture."),void(await a.push("/login"));let r;try{r=JSON.parse(e).id}catch{return void alert("Erreur: données de session invalides.")}if(Z.value.immatriculation&&Z.value.description&&Z.value.typeIntervention){t.value=!0;try{const e=(new Date).toISOString(),t=`voiture_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`,o=`reparation_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`,i={client_uid:r,created_at:e,date_depot:e,description:Z.value.description.trim(),immatriculation:Z.value.immatriculation.trim(),statut_id:"enAttente"},n={created_at:e,statut_id:"planifiee",type_intervention_id:Z.value.typeIntervention,voiture_id:t};await Promise.all([q(C(Y,`voitures/${t}`),i),q(C(Y,`reparations/${o}`),n)]),console.log("Voiture et réparation créées avec succès:",t,o),alert(`✅ Votre demande de réparation a été enregistrée !\\n\\nImmatriculation: ${Z.value.immatriculation}\\nStatut: En attente`),await a.replace({name:"Acceuil"})}catch(o){console.error("Erreur lors de l'envoi:",o),alert("Une erreur est survenue. Veuillez réessayer.")}finally{t.value=!1}}else alert("Veuillez remplir tous les champs obligatoires")};return(e,a)=>(U(),o(n(l),null,{default:i(()=>[s(n(f),{translucent:!0},{default:i(()=>[s(n(c),null,{default:i(()=>[s(n(p),{slot:"start"},{default:i(()=>[s(n(u),{"default-href":"/acceuil"})]),_:1}),s(n(m),null,{default:i(()=>[...a[3]||(a[3]=[v("Ajouter une voiture",-1)])]),_:1})]),_:1})]),_:1}),s(n(E),{fullscreen:!0,class:"ion-padding"},{default:i(()=>[g("div",M,[a[10]||(a[10]=g("div",{class:"form-header"},[g("h1",{class:"form-title"},"Déposer une voiture"),g("p",{class:"form-subtitle"},"Décrivez la panne et sélectionnez le type d'intervention")],-1)),g("form",{onSubmit:b(H,["prevent"]),class:"form-section"},[g("div",O,[a[4]||(a[4]=g("label",{for:"immatriculation",class:"form-label"},"Immatriculation",-1)),x(g("input",{id:"immatriculation","onUpdate:modelValue":a[0]||(a[0]=e=>Z.value.immatriculation=e),type:"text",placeholder:"Ex: AB-123-CD",class:"form-input",required:""},null,512),[[h,Z.value.immatriculation]])]),g("div",P,[a[5]||(a[5]=g("label",{for:"description",class:"form-label"},"Description du problème",-1)),a[6]||(a[6]=g("p",{class:"form-hint"},"Décrivez en détail la panne ou le problème",-1)),x(g("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=e=>Z.value.description=e),placeholder:"Ex: Pneu avant gauche crevé, problème de démarrage...",class:"form-textarea",rows:"5",required:""},null,512),[[h,Z.value.description]])]),g("div",B,[a[8]||(a[8]=g("label",{for:"typeIntervention",class:"form-label"},"Type d'intervention",-1)),x(g("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>Z.value.typeIntervention=e),id:"typeIntervention",class:"form-select",required:""},[a[7]||(a[7]=g("option",{value:""},"Sélectionner un type...",-1)),(U(!0),w(z,null,k(A.value,(e,a)=>(U(),w("option",{key:a,value:a},$(e.nom)+" ("+$(e.prix)+"€) ",9,G))),128))],512),[[y,Z.value.typeIntervention]])]),g("button",{type:"submit",class:"submit-btn",disabled:t.value},[t.value?(U(),o(n(S),{key:1,name:"dots"})):(U(),o(n(_),{key:0,icon:n(I),class:"btn-icon"},null,8,["icon"])),t.value?V("",!0):(U(),w("span",N,"Envoyer au garage"))],8,J)],32),g("div",T,[s(n(_),{icon:n(D),class:"info-icon"},null,8,["icon"]),a[9]||(a[9]=g("p",null,"Vos informations seront traitées rapidement par nos techniciens. Vous recevrez une estimation dans les 24h.",-1))])])]),_:1})]),_:1}))}}),[["__scopeId","data-v-6e92e304"]]))}}});
