import{d as X,c as Y,w as u,u as t,I as Z,a as l,b as ee,e as te,f as se,g as ne,h as v,i as le,j as n,k as a,H as R,m as w,n as E,o as V,p as oe,r as k,s as L,v as y,J as x,q as ae,K as ie,L as ue,M as $,x as D,A as re,y as ce,N as de,O as me,P as pe,Q as ve,D as fe,E as f,R as S,F as ge,G as b,_ as Ie}from"./index-x2tkpoM1.js";import{s as _e,r as be,d as he}from"./firebase-RQfAkDXS.js";const ke={class:"register-container"},ye={class:"register-header"},Ce={class:"logo-icon"},we={class:"form-section"},Ve={class:"input-group"},xe={key:0,class:"error-message"},Oe={key:1,class:"success-message"},Ee={class:"input-group"},Se={key:0,class:"success-message"},Ne={class:"input-group"},Pe={key:0,class:"success-message"},ze={class:"input-group"},Be={class:"password-hint"},Re={key:0,class:"error-message"},Te={key:1,class:"success-message"},qe={class:"terms-section"},Ae={class:"actions-section"},Me={class:"action-buttons"},He={class:"benefits-section"},Le={class:"benefits-list"},$e={class:"benefit-item"},De={class:"benefit-icon"},Fe={class:"benefit-item"},Ge={class:"benefit-icon"},Je={class:"benefit-item"},je={class:"benefit-icon"},Ke={class:"benefit-item"},Qe={class:"benefit-icon"},Ue=X({__name:"Register",setup(We){const T=ge(),g=f(""),I=f(""),_=f(""),i=f(""),C=f(!1),F=s=>/^\S+@\S+\.\S+$/.test(s),h=S(()=>F((g.value||"").trim())),G=S(()=>(I.value||"").trim().length>0),J=S(()=>(_.value||"").trim().length>0),j=S(()=>h.value&&G.value&&J.value&&i.value&&i.value.length>=6),q=f(null),A=f(null),M=f(null),H=f(null),O=s=>{if(!s)return null;try{const e=s.shadowRoot,r=e&&e.querySelector("input")||s.querySelector&&s.querySelector("input")||null;return r?r.value:null}catch(e){return null}},N=s=>{var c,d,o,m,p;const e=(m=(o=(c=s==null?void 0:s.detail)==null?void 0:c.value)!=null?o:(d=s==null?void 0:s.target)==null?void 0:d.value)!=null?m:"",r=(p=O(q.value))!=null?p:"";g.value=e||r},P=s=>{var c,d,o,m,p;const e=(m=(o=(c=s==null?void 0:s.detail)==null?void 0:c.value)!=null?o:(d=s==null?void 0:s.target)==null?void 0:d.value)!=null?m:"",r=(p=O(A.value))!=null?p:"";I.value=e||r},z=s=>{var c,d,o,m,p;const e=(m=(o=(c=s==null?void 0:s.detail)==null?void 0:c.value)!=null?o:(d=s==null?void 0:s.target)==null?void 0:d.value)!=null?m:"",r=(p=O(M.value))!=null?p:"";_.value=e||r},B=s=>{var c,d,o,m,p;const e=(m=(o=(c=s==null?void 0:s.detail)==null?void 0:c.value)!=null?o:(d=s==null?void 0:s.target)==null?void 0:d.value)!=null?m:"",r=(p=O(H.value))!=null?p:"";i.value=e||r},K=()=>{alert("Conditions d'utilisation\n\nEn cr√©ant un compte, vous acceptez nos conditions d'utilisation...")},Q=()=>{alert("Politique de confidentialit√©\n\nNous prot√©geons vos donn√©es personnelles...")},U=()=>{T.push("/login")},W=async()=>{typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();const s=(g.value||"").trim();if(!s||!h.value){console.warn("Register prevented: invalid email according to client check:",s);return}if(!i.value||i.value.length<6){console.warn("Register prevented: short password");return}if(!C.value){alert("Veuillez accepter les conditions d'utilisation pour continuer.");return}const e=s.normalize?s.normalize("NFC"):s,r=(I.value||"").trim(),c=(_.value||"").trim(),d=i.value;if(!r||!c){alert("Veuillez saisir votre nom et pr√©nom.");return}try{const o={email:e,nom:r,prenom:c,created_at:new Date().toISOString()};await _e(be(he,"clients/".concat(d)),o);const m={id:d,...o};localStorage.setItem("client",JSON.stringify(m)),alert("üéâ Compte cr√©√© avec succ√®s !\n\nBienvenue sur Garage Elite, ".concat(c," !")),T.replace({name:"Acceuil"})}catch(o){console.error("RTDB write error:",o),alert("‚ùå Erreur lors de la cr√©ation du compte : ".concat((o==null?void 0:o.message)||o))}};return(s,e)=>(b(),Y(t(Z),null,{default:u(()=>[l(t(le),null,{default:u(()=>[l(t(ee),{class:"custom-toolbar"},{default:u(()=>[l(t(te),{slot:"start"},{default:u(()=>[l(t(se),{defaultHref:"/home",text:"Retour",class:"custom-back-button"})]),_:1}),l(t(ne),{class:"page-title"},{default:u(()=>[...e[1]||(e[1]=[v("Inscription",-1)])]),_:1})]),_:1})]),_:1}),l(t(fe),{class:"ion-padding"},{default:u(()=>[n("div",ke,[n("div",ye,[n("div",Ce,[l(t(a),{icon:t(R)},null,8,["icon"])]),e[2]||(e[2]=n("h1",{class:"register-title"},"Rejoignez-nous",-1)),e[3]||(e[3]=n("p",{class:"register-subtitle"},"Cr√©ez votre compte Garage Elite",-1))]),n("div",we,[n("div",Ve,[l(t(w),{class:"input-label"},{default:u(()=>[...e[4]||(e[4]=[v("Adresse email",-1)])]),_:1}),l(t(E),{ref_key:"emailInput",ref:q,type:"email",value:g.value,onIonInput:N,onInput:N,onChange:N,placeholder:"exemple@email.com",class:V(["custom-input",{"has-error":g.value&&!h.value,"has-success":g.value&&h.value}])},{default:u(()=>[l(t(a),{icon:t(oe),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),g.value&&!h.value?(b(),k("div",xe,[l(t(a),{icon:t(L)},null,8,["icon"]),e[5]||(e[5]=n("span",null,"Veuillez saisir une adresse email valide",-1))])):y("",!0),g.value&&h.value?(b(),k("div",Oe,[l(t(a),{icon:t(x)},null,8,["icon"]),e[6]||(e[6]=n("span",null,"Format d'email valide",-1))])):y("",!0)]),n("div",Ee,[l(t(w),{class:"input-label"},{default:u(()=>[...e[7]||(e[7]=[v("Nom",-1)])]),_:1}),l(t(E),{ref_key:"nomInput",ref:A,type:"text",value:I.value,onIonInput:P,onInput:P,onChange:P,placeholder:"Votre nom",class:V(["custom-input",{"has-success":I.value&&I.value.trim().length>0}])},{default:u(()=>[l(t(a),{icon:t(R),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),I.value&&I.value.trim().length>0?(b(),k("div",Se,[l(t(a),{icon:t(x)},null,8,["icon"]),e[8]||(e[8]=n("span",null,"Nom renseign√©",-1))])):y("",!0)]),n("div",Ne,[l(t(w),{class:"input-label"},{default:u(()=>[...e[9]||(e[9]=[v("Pr√©nom",-1)])]),_:1}),l(t(E),{ref_key:"prenomInput",ref:M,type:"text",value:_.value,onIonInput:z,onInput:z,onChange:z,placeholder:"Votre pr√©nom",class:V(["custom-input",{"has-success":_.value&&_.value.trim().length>0}])},{default:u(()=>[l(t(a),{icon:t(R),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),_.value&&_.value.trim().length>0?(b(),k("div",Pe,[l(t(a),{icon:t(x)},null,8,["icon"]),e[10]||(e[10]=n("span",null,"Pr√©nom renseign√©",-1))])):y("",!0)]),n("div",ze,[l(t(w),{class:"input-label"},{default:u(()=>[...e[11]||(e[11]=[v("Mot de passe",-1)])]),_:1}),l(t(E),{ref_key:"passwordInput",ref:H,type:"password",value:i.value,onIonInput:B,onInput:B,onChange:B,placeholder:"Minimum 6 caract√®res",class:V(["custom-input",{"has-error":i.value&&i.value.length<6,"has-success":i.value&&i.value.length>=6}])},{default:u(()=>[l(t(a),{icon:t(ae),slot:"start"},null,8,["icon"])]),_:1},8,["value","class"]),n("div",Be,[n("div",{class:V(["hint-item",{valid:i.value.length>=6}])},[l(t(a),{icon:i.value.length>=6?t(x):t(ie)},null,8,["icon"]),e[12]||(e[12]=n("span",null,"Au moins 6 caract√®res",-1))],2)]),i.value&&i.value.length<6?(b(),k("div",Re,[l(t(a),{icon:t(L)},null,8,["icon"]),e[13]||(e[13]=n("span",null,"Le mot de passe doit contenir au moins 6 caract√®res",-1))])):y("",!0),i.value&&i.value.length>=6?(b(),k("div",Te,[l(t(a),{icon:t(x)},null,8,["icon"]),e[14]||(e[14]=n("span",null,"Mot de passe valide",-1))])):y("",!0)]),n("div",qe,[l(t(ue),{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=r=>C.value=r),checked:C.value,class:"terms-checkbox"},null,8,["modelValue","checked"]),l(t(w),{class:"terms-label"},{default:u(()=>[e[15]||(e[15]=v(" J'accepte les ",-1)),n("a",{href:"#",class:"terms-link",onClick:$(K,["prevent"])},"conditions d'utilisation"),e[16]||(e[16]=v(" et la ",-1)),n("a",{href:"#",class:"terms-link",onClick:$(Q,["prevent"])},"politique de confidentialit√©")]),_:1})]),n("div",Ae,[n("div",Me,[l(t(D),{expand:"block",onClick:W,disabled:!j.value||!C.value,class:"primary-btn"},{default:u(()=>[l(t(a),{icon:t(re),slot:"start"},null,8,["icon"]),e[17]||(e[17]=v(" Cr√©er mon compte ",-1))]),_:1},8,["disabled"]),l(t(D),{expand:"block",onClick:U,class:"secondary-btn"},{default:u(()=>[l(t(a),{icon:t(ce),slot:"start"},null,8,["icon"]),e[18]||(e[18]=v(" Se connecter ",-1))]),_:1})])]),n("div",He,[e[23]||(e[23]=n("h3",{class:"benefits-title"},"Avantages d'un compte Garage Elite",-1)),n("div",Le,[n("div",$e,[n("div",De,[l(t(a),{icon:t(de)},null,8,["icon"])]),e[19]||(e[19]=n("span",null,"Prendre rendez-vous en ligne",-1))]),n("div",Fe,[n("div",Ge,[l(t(a),{icon:t(me)},null,8,["icon"])]),e[20]||(e[20]=n("span",null,"Historique des r√©parations",-1))]),n("div",Je,[n("div",je,[l(t(a),{icon:t(pe)},null,8,["icon"])]),e[21]||(e[21]=n("span",null,"Alertes d'entretien",-1))]),n("div",Ke,[n("div",Qe,[l(t(a),{icon:t(ve)},null,8,["icon"])]),e[22]||(e[22]=n("span",null,"Points fid√©lit√©",-1))])])])])])]),_:1})]),_:1}))}}),Ze=Ie(Ue,[["__scopeId","data-v-b4dcf8c3"]]);export{Ze as default};
